{% extends "base.html" %}

{% block title %}Order Confirmed - #{{ order_number }}{% endblock %}

{% block header_title %}Order Confirmed!{% endblock %}
{% block header_subtitle %}Thank you for your purchase{% endblock %}

{% block content %}
<h2>Order Confirmed</h2>

<p>Hi {{ first_name }},</p>

<p>Thank you for your order! We've received it and it's now being processed by the vendor.</p>

<div style="margin: 20px 0;">
    <span class="badge badge-green">Order #{{ order_number }}</span>
    <span style="margin-left: 8px; color: #6b7280; font-size: 14px;">{{ order_date }}</span>
</div>

<h3 style="margin-top: 32px; color: #1f2937;">Order Details</h3>

<table class="data-table" role="presentation" width="100%" cellpadding="0" cellspacing="0">
    <thead>
        <tr>
            <th>Product</th>
            <th class="text-center">Qty</th>
            <th class="text-right">Price</th>
        </tr>
    </thead>
    <tbody>
        {% for item in items %}
        <tr>
            <td>
                <strong>{{ item.name }}</strong>
                {% if item.variant %}<br><span style="color: #6b7280; font-size: 13px;">{{ item.variant }}</span>{% endif %}
            </td>
            <td class="text-center">{{ item.quantity }}</td>
            <td class="text-right">{{ currency }} {{ "%.2f"|format(item.unit_price) }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<table class="summary-table" role="presentation" width="100%" cellpadding="0" cellspacing="0">
    <tr>
        <td class="label">Subtotal</td>
        <td class="value">{{ currency }} {{ "%.2f"|format(subtotal) }}</td>
    </tr>
    <tr>
        <td class="label">Shipping</td>
        <td class="value">{{ currency }} {{ "%.2f"|format(shipping) }}</td>
    </tr>
    <tr>
        <td class="label">Tax</td>
        <td class="value">{{ currency }} {{ "%.2f"|format(tax) }}</td>
    </tr>
    <tr class="total">
        <td class="label"><strong>Total</strong></td>
        <td class="value"><strong>{{ currency }} {{ "%.2f"|format(total) }}</strong></td>
    </tr>
</table>

<h3 style="margin-top: 32px; color: #1f2937;">Shipping Address</h3>
<div style="background-color: #f9fafb; padding: 16px; border-radius: 6px; margin: 12px 0;">
    <p style="margin: 4px 0;"><strong>{{ shipping_address.name }}</strong></p>
    <p style="margin: 4px 0; color: #6b7280;">{{ shipping_address.street }}</p>
    {% if shipping_address.apartment %}<p style="margin: 4px 0; color: #6b7280;">{{ shipping_address.apartment }}</p>{% endif %}
    <p style="margin: 4px 0; color: #6b7280;">{{ shipping_address.city }}, {{ shipping_address.state }} {{ shipping_address.zip }}</p>
    <p style="margin: 4px 0; color: #6b7280;">{{ shipping_address.country }}</p>
    {% if shipping_address.phone %}<p style="margin: 4px 0; color: #6b7280;">Phone: {{ shipping_address.phone }}</p>{% endif %}
</div>

{% if estimated_delivery %}
<div class="info-box">
    <p><strong>Estimated Delivery:</strong> {{ estimated_delivery }}</p>
</div>
{% endif %}

<div style="text-align: center; margin: 32px 0;">
    <a href="{{ app_url }}/account/orders/{{ order_number }}" class="btn">View Order Details</a>
</div>

<p style="font-size: 14px; color: #6b7280; margin-top: 24px;">
    You'll receive another email when your order ships with tracking information.
</p>

<p style="margin-top: 24px;">
    Thank you for shopping with Channah!<br>
    <strong>The Channah Team</strong>
</p>
{% endblock %}
